# Configuraci√≥n de la Tienda - SettingsPage

## Descripci√≥n
La p√°gina de Settings ahora incluye una funcionalidad completa para gestionar la configuraci√≥n de la tienda, permitiendo a los usuarios actualizar informaci√≥n b√°sica, subir logo y banner, y configurar detalles de contacto.

## Caracter√≠sticas

### ‚úÖ Funcionalidades Implementadas
- **Gesti√≥n de im√°genes**: Subida y actualizaci√≥n de logo y banner de la tienda
- **Informaci√≥n de la tienda**: Nombre, descripci√≥n, tel√©fono, sitio web y WhatsApp
- **Modo de edici√≥n**: Interfaz intuitiva para editar y guardar cambios
- **Validaci√≥n de archivos**: Solo acepta im√°genes con l√≠mite de 5MB
- **Almacenamiento en Supabase**: Las im√°genes se guardan en el bucket `store-assets`
- **Actualizaci√≥n autom√°tica**: La UI se actualiza en tiempo real
- **Manejo de errores**: Mensajes informativos para el usuario

### üîß Componentes Utilizados
- **SettingsPage**: Componente principal que maneja la interfaz de usuario
- **useStoreProfile**: Hook personalizado que maneja la l√≥gica de negocio
- **Supabase Storage**: Para el almacenamiento de archivos
- **UI Components**: Botones, inputs, cards y textarea de la librer√≠a de componentes

## Estructura de Archivos

### Supabase Storage
```
store-assets/
‚îî‚îÄ‚îÄ stores/
    ‚îî‚îÄ‚îÄ store_images/
        ‚îú‚îÄ‚îÄ {user_id}_logo_{timestamp}.jpg
        ‚îú‚îÄ‚îÄ {user_id}_logo_{timestamp}.png
        ‚îú‚îÄ‚îÄ {user_id}_banner_{timestamp}.jpg
        ‚îî‚îÄ‚îÄ {user_id}_banner_{timestamp}.png
```

### Base de Datos
```sql
-- Tabla store_profile
CREATE TABLE public.store_profile (
  id bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  name character varying NOT NULL,
  description character varying,
  phone character varying,
  banner_image text,
  logo_image text,
  web_url text,
  whatsapp_url text,
  type_store bigint,
  address bigint,
  email bigint,
  -- ... otros campos
);
```

## Flujo de Funcionamiento

### üìù Edici√≥n de Informaci√≥n
1. **Usuario hace clic** en "Editar"
2. **Se habilitan los campos** para modificaci√≥n
3. **Usuario modifica** la informaci√≥n deseada
4. **Usuario guarda** los cambios
5. **Se actualiza** la base de datos
6. **Se muestra mensaje** de √©xito

### üñºÔ∏è Subida de Im√°genes
1. **Usuario hace clic** en "Cambiar Logo/Banner"
2. **Se abre selector** de archivos
3. **Se valida** el archivo seleccionado
4. **Se sube** a Supabase Storage
5. **Se actualiza** la base de datos
6. **Se actualiza** la UI

## Campos Editables

### Informaci√≥n B√°sica
- **Nombre de la tienda**: Texto libre
- **Descripci√≥n**: √Årea de texto multil√≠nea
- **Tel√©fono**: Formato de tel√©fono
- **Sitio web**: URL v√°lida
- **WhatsApp**: URL de WhatsApp Business

### Im√°genes
- **Logo**: Imagen cuadrada recomendada (1:1)
- **Banner**: Imagen rectangular recomendada (16:9)

## Validaciones

### Tipo de Archivo
- Solo se permiten archivos de imagen (`image/*`)
- Formatos soportados: JPG, PNG, GIF

### Tama√±o de Archivo
- M√°ximo: 5MB por imagen
- Se muestra mensaje de error si excede el l√≠mite

### Campos Requeridos
- **Nombre**: Obligatorio
- **Descripci√≥n**: Opcional
- **Tel√©fono**: Opcional
- **URLs**: Opcionales, pero deben ser v√°lidas si se proporcionan

## Estados de la Aplicaci√≥n

- **loading**: Cargando configuraci√≥n de la tienda
- **updating**: Actualizando informaci√≥n de la tienda
- **uploadingImage**: Subiendo imagen (logo o banner)
- **error**: Error en alguna operaci√≥n
- **successMessage**: Mensaje de √©xito
- **imageMessage**: Mensaje relacionado con im√°genes
- **isEditing**: Modo de edici√≥n activo

## Uso del Hook

```typescript
const { 
    storeProfile, 
    updating, 
    uploadingImage, 
    updateStoreProfile, 
    uploadStoreImage 
} = useStoreProfile();

// Actualizar informaci√≥n de la tienda
const handleSave = async () => {
    const result = await updateStoreProfile(formData);
    if (result?.success) {
        console.log('Tienda actualizada exitosamente');
    }
};

// Subir imagen
const handleImageUpload = async (file: File, type: 'logo' | 'banner') => {
    const result = await uploadStoreImage(file, type);
    if (result?.success) {
        console.log('Imagen subida exitosamente');
    }
};
```

## Interfaz de Usuario

### Modo de Visualizaci√≥n
- Campos en modo solo lectura
- Bot√≥n "Editar" visible
- Im√°genes mostradas en contenedores con bordes punteados

### Modo de Edici√≥n
- Campos habilitados para edici√≥n
- Botones "Cancelar" y "Guardar Cambios"
- Indicadores de estado (guardando, subiendo)

### Mensajes de Estado
- **Verde**: Operaciones exitosas
- **Rojo**: Errores y validaciones fallidas
- **Timeout autom√°tico**: Desaparecen despu√©s de 3 segundos

## Consideraciones de Dise√±o

### Logo
- Contenedor cuadrado (128x128px)
- Borde punteado cuando no hay imagen
- √çcono de c√°mara como placeholder

### Banner
- Contenedor rectangular (ancho completo x 128px)
- Borde punteado cuando no hay imagen
- √çcono de c√°mara como placeholder

### Layout
- Grid responsivo que se adapta a diferentes tama√±os de pantalla
- Campos organizados en grupos l√≥gicos
- Espaciado consistente entre elementos

## Manejo de Errores

- **Error de subida**: Se muestra mensaje espec√≠fico del error
- **Error de validaci√≥n**: Se muestra mensaje explicativo
- **Error de red**: Se muestra mensaje gen√©rico de error
- **Error de base de datos**: Se muestra mensaje del servidor

## Futuras Mejoras

- [ ] Compresi√≥n autom√°tica de im√°genes
- [ ] Recorte y redimensionamiento autom√°tico
- [ ] Vista previa de im√°genes antes de subir
- [ ] Historial de cambios en la configuraci√≥n
- [ ] Backup autom√°tico de configuraciones
- [ ] Plantillas predefinidas para diferentes tipos de tienda
- [ ] Integraci√≥n con redes sociales
- [ ] Configuraci√≥n de horarios de atenci√≥n
- [ ] Gesti√≥n de m√∫ltiples ubicaciones

## Dependencias

- `@/hooks/StoreProfile/useStoreProfile` - Para obtener y actualizar datos de la tienda
- `@/types/store` - Para tipos de datos
- `@/components/ui/*` - Para componentes de interfaz
- `lucide-react` - Para iconos
- `react` - Para hooks y estado
